<%
    var title = '';
    if (page.archive) {
        if (page.year) title = page.year + (page.month ? '/' + page.month : '');
        else title = __('archive_a');
    }

    var postList = [];
    postList = site.posts;
%>

<!-- Banner -->
<%- partial('_partial/banner.ejs', {
    mainText: title,
    secondaryText: '',
    faIconCss: theme.archive_font_awesome_icon_css
}) %>

<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content mw8 center">
        <% var last; %>
        <% postList.sort("date", -1).each(function(item){ %>
            <% var year = item.date.format(theme.archive_date_format); 
                var date_type;
               if (last == year){ %>
            <% }else { %>
                <% if (last != null) {%>
            </div></div>
                <% } %>
            <div class="dt w-100 mb4 center year">
                <div class="dtc li w-20 tc relative">
                    <span class="dib f4 fw3">
                        <%= item.date.format(theme.archive_date_format) %>
                    </span>
                </div>
                <div class="dtc w-80">
            <% }
               last = year;
            %>
            <%- partial('_partial/article-archive', {item: item}) %>
        <% }); %>
        <% if(postList.length) {%>
            </div></div>
        <% } %>
    </div>
</div>